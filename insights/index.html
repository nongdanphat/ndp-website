<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chia sẻ - Nông Dân Phát</title>
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico" />
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- ============================================ -->
    <!-- CẤU HÌNH - Thay đổi URL bên dưới -->
    <!-- ============================================ -->
    <script>
      const CONTACT_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbwV5mUyGuBGVlmapkFNesXpOpTTOidO2BTRiAlW_bNWDd91bvv6QivOZ_1qioeyV0g9/exec";
    </script>
  </head>
  <body class="bg-gray-100 text-gray-900">
    <!-- Header placeholder - will be loaded dynamically -->
    <div id="header-placeholder"></div>

    <!-- Main Content -->
    <main class="min-h-screen">
      <!-- Phần 1: Chia sẻ -->
      <section class="w-full bg-gray-100 py-12">
        <div class="container mx-auto px-4 max-w-6xl">
          <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-8">
            Chia sẻ
          </h1>

          <div class="grid md:grid-cols-3 gap-6">
            <article
              class="bg-transparent rounded-xl overflow-hidden flex flex-col h-full"
            >
              <div class="h-48 overflow-hidden rounded-3xl">
                <img
                  src="/assets/images/insights/nong-dan-phat-cai-gi.jpg"
                  alt="Nông Dân Phát – "Phát" cái gì?"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="p-4 flex flex-col flex-grow">
                <span class="text-base text-gray-500">1 Tháng 1, 2026</span>
                <h3
                  class="text-xl font-semibold mt-2 mb-2 line-clamp-2 min-h-[3.5rem] text-left"
                  title="Nông Dân Phát – "Phát" cái gì?"
                >
                  Nông Dân Phát – "Phát" cái gì?
                </h3>
                <p
                  class="text-gray-600 line-clamp-2 min-h-[3rem]"
                  title="Chương trình hỗ trợ nông dân tiếp cận và áp dụng các công nghệ nông nghiệp hiện đại để nâng cao năng suất và chất lượng sản phẩm."
                >
                  Nông Dân Phát không chỉ hỗ trợ nông dân làm ra sản phẩm, mà
                  đồng hành để nông dân phát triển toàn diện: từ tư duy, năng
                  lực đến vị thế và đạo đức làm nông.
                </p>
                <a
                  href="/insights/nong-dan-phat-phat-cai-gi.html"
                  class="text-[#AB7E31] hover:text-[#BE8F2B] mt-4 inline-block font-medium"
                  >Đọc thêm ></a
                >
              </div>
            </article>
            <article
              class="bg-transparent rounded-xl overflow-hidden flex flex-col h-full"
            >
              <div class="h-48 overflow-hidden rounded-3xl">
                <img
                  src="/assets/images/insights/phat-tri-tu-duy-lam-nong.jpg"
                  alt="Phát Trí – Khi nông dân hiểu rõ việc mình đang làm"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="p-4 flex flex-col flex-grow">
                <span class="text-base text-gray-500">1 Tháng 1, 2026</span>
                <h3
                  class="text-xl font-semibold mt-2 mb-2 line-clamp-2 min-h-[3.5rem] text-left"
                  title="Phát Trí – Khi nông dân hiểu rõ việc mình đang làm"
                >
                  Phát Trí – Khi nông dân hiểu rõ việc mình đang làm
                </h3>
                <p
                  class="text-gray-600 line-clamp-2 min-h-[3rem]"
                  title="Giới thiệu dòng sản phẩm phân bón hữu cơ cao cấp, thân thiện với môi trường, giúp cây trồng phát triển khỏe mạnh và bền vững."
                >
                  Phát triển bền vững bắt đầu từ việc nông dân hiểu trồng gì, vì
                  sao trồng, bán cho ai và lời lỗ thế nào. Thoát khỏi làm theo
                  thói quen và may rủi.
                </p>
                <a
                  href="/insights/phat-tri-tu-duy-lam-nong.html"
                  class="text-[#AB7E31] hover:text-[#BE8F2B] mt-4 inline-block font-medium"
                  >Đọc thêm ></a
                >
              </div>
            </article>
            <article
              class="bg-transparent rounded-xl overflow-hidden flex flex-col h-full"
            >
              <div class="h-48 overflow-hidden rounded-3xl">
                <img
                  src="/assets/images/insights/phat-luc-phat-tai-lam-nong-co-loi.jpg"
                  alt="Phát Lực – Phát Tài: Làm nông có lời thật, không chỉ đủ sống"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="p-4 flex flex-col flex-grow">
                <span class="text-base text-gray-500">1 Tháng 1, 2026</span>
                <h3
                  class="text-xl font-semibold mt-2 mb-2 line-clamp-2 min-h-[3.5rem] text-left"
                  title="Phát Lực – Phát Tài: Làm nông có lời thật, không chỉ đủ sống"
                >
                  Phát Lực – Phát Tài: Làm nông có lời thật, không chỉ đủ sống
                </h3>
                <p
                  class="text-gray-600 line-clamp-2 min-h-[3rem]"
                  title="Nhiều cơ hội việc làm hấp dẫn cho lao động nông nghiệp tại các vườn cây, trang trại trên khắp cả nước với mức lương cạnh tranh."
                >
                  Giảm chi phí đầu vào, tăng hiệu quả lao động và có đầu ra ổn
                  định để nông dân có thể tích lũy, tái đầu tư và sống được bằng
                  nghề nông.
                </p>
                <a
                  href="/insights/phat-luc-phat-tai-lam-nong-co-loi.html"
                  class="text-[#AB7E31] hover:text-[#BE8F2B] mt-4 inline-block font-medium"
                  >Đọc thêm ></a
                >
              </div>
            </article>
            <article
              class="bg-transparent rounded-xl overflow-hidden flex flex-col h-full"
            >
              <div class="h-48 overflow-hidden rounded-3xl">
                <img
                  src="/assets/images/insights/phat-the-vi-the-nong-dan.jpg"
                  alt="Phát Thế – Khi nông dân có vị thế trong chuỗi giá trị"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="p-4 flex flex-col flex-grow">
                <span class="text-base text-gray-500">1 Tháng 1, 2026</span>
                <h3
                  class="text-xl font-semibold mt-2 mb-2 line-clamp-2 min-h-[3.5rem] text-left"
                  title="Phát Thế – Khi nông dân có vị thế trong chuỗi giá trị"
                >
                  Phát Thế – Khi nông dân có vị thế trong chuỗi giá trị
                </h3>
                <p
                  class="text-gray-600 line-clamp-2 min-h-[3rem]"
                  title="Nông dân không chỉ là người bán nông sản, mà là đối tác sản xuất được tôn trọng, có tiếng nói và sức thương lượng."
                >
                  Nông dân không chỉ là người bán nông sản, mà là đối tác sản
                  xuất được tôn trọng, có tiếng nói và sức thương lượng.
                </p>
                <a
                  href="/insights/phat-the-vi-the-nong-dan.html"
                  class="text-[#AB7E31] hover:text-[#BE8F2B] mt-4 inline-block font-medium"
                  >Đọc thêm ></a
                >
              </div>
            </article>
            <article
              class="bg-transparent rounded-xl overflow-hidden flex flex-col h-full"
            >
              <div class="h-48 overflow-hidden rounded-3xl">
                <img
                  src="/assets/images/insights/phat-dao-lam-nong-tu-te.jpg"
                  alt="Phát Đạo – Làm nông tử tế để không đánh đổi tương lai"
                  class="w-full h-full object-cover"
                />
              </div>
              <div class="p-4 flex flex-col flex-grow">
                <span class="text-base text-gray-500">1 Tháng 1, 2026</span>
                <h3
                  class="text-xl font-semibold mt-2 mb-2 line-clamp-2 min-h-[3.5rem] text-left"
                  title="Phát Đạo – Làm nông tử tế để không đánh đổi tương lai"
                >
                  Phát Đạo – Làm nông tử tế để không đánh đổi tương lai
                </h3>
                <p
                  class="text-gray-600 line-clamp-2 min-h-[3rem]"
                  title="Phát triển không thể đánh đổi đất, nước, môi trường và đạo đức. Làm nông bền vững là để lại cho thế hệ sau một cách làm tốt hơn."
                >
                  Phát triển không thể đánh đổi đất, nước, môi trường và đạo
                  đức. Làm nông bền vững là để lại cho thế hệ sau một cách làm
                  tốt hơn.
                </p>
                <a
                  href="/insights/phat-dao-lam-nong-tu-te.html"
                  class="text-[#AB7E31] hover:text-[#BE8F2B] mt-4 inline-block font-medium"
                  >Đọc thêm ></a
                >
              </div>
            </article>
          </div>
        </div>
      </section>

      <!-- Phần 2: Xin ý kiến -->
      <section id="xin-y-kien" class="bg-gray-100 py-12">
        <div class="container mx-auto px-4 max-w-6xl">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-8">
            Xin ý kiến
          </h2>

          <div class="grid md:grid-cols-2 gap-12 items-start">
            <!-- Contact Information -->
            <div class="pt-8">
              <p class="text-base md:text-lg text-gray-600 mb-8 leading-relaxed">
                Chúng tôi mong nhận được những chia sẻ, góc nhìn và trải nghiệm
từ nông dân, đối tác và những người quan tâm đến nông nghiệp bền vững.
              </p>
              <p class="text-base md:text-lg text-gray-600 mb-8 leading-relaxed">
Mỗi ý kiến đều giúp Nông Dân Phát nhìn lại cách mình đang làm
và hoàn thiện hơn trên hành trình đồng hành lâu dài.
              </p>
              <div class="space-y-6">
                <div>
                  <p class="text-base text-gray-600 mb-1">Email:</p>
                  <p class="text-base font-bold text-gray-900">info@ndphat.vn</p>
                </div>
                <!-- <div>
                  <p class="text-base text-gray-600 mb-1">Điện thoại:</p>
                  <p class="text-base font-bold text-gray-900">+84 123 456 789</p>
                </div> -->
              </div>
            </div>

            <!-- Contact Form -->
            <div class="bg-white p-8 rounded-3xl">
              <p class="text-base text-gray-600 mb-6 leading-relaxed">
                Thông tin bạn cung cấp giúp Nông Dân Phát hiểu nhu cầu và liên hệ lại khi cần thiết.
              </p>
              <form id="contact-form" class="space-y-4">
                <div>
                  <label
                    for="name"
                    class="block text-base font-medium text-gray-700 mb-1"
                    >Họ và tên <span class="text-red-500">*</span></label
                  >
                  <input
                    type="text"
                    id="name"
                    name="name"
                    required
                    class="w-full px-4 py-2 border border-gray-300 rounded-3xl focus:outline-none focus:ring-2 focus:ring-[#AB7E31] focus:border-transparent"
                  />
                </div>
                <div>
                  <label
                    for="email"
                    class="block text-base font-medium text-gray-700 mb-1"
                    >Email <span class="text-red-500">*</span></label
                  >
                  <input
                    type="email"
                    id="email"
                    name="email"
                    required
                    class="w-full px-4 py-2 border border-gray-300 rounded-3xl focus:outline-none focus:ring-2 focus:ring-[#AB7E31] focus:border-transparent"
                  />
                </div>
                <div>
                  <label
                    for="phone"
                    class="block text-base font-medium text-gray-700 mb-1"
                    >Số điện thoại <span class="text-red-500">*</span></label
                  >
                  <input
                    type="tel"
                    id="phone"
                    name="phone"
                    required
                    inputmode="numeric"
                    pattern="[0-9]*"
                    class="w-full px-4 py-2 border border-gray-300 rounded-3xl focus:outline-none focus:ring-2 focus:ring-[#AB7E31] focus:border-transparent"
                  />
                </div>
                <div>
                  <label
                    for="message"
                    class="block text-base font-medium text-gray-700 mb-1"
                    >Bạn có điều gì muốn chia sẻ?
                    <span class="text-red-500">*</span></label
                  >
                  <textarea
                    id="message"
                    name="message"
                    rows="4"
                    required
                    class="w-full px-4 py-2 border border-gray-300 rounded-3xl focus:outline-none focus:ring-2 focus:ring-[#AB7E31] focus:border-transparent"
                  ></textarea>
                </div>
                <div
                  id="contact-message"
                  class="hidden mt-4 p-4 rounded-3xl"
                ></div>
                <div class="flex items-start gap-3">
                  <input
                    type="checkbox"
                    id="consent-checkbox"
                    name="consent"
                    required
                    class="mt-1 rounded border-gray-300 text-[#AB7E31] cursor-pointer custom-checkbox"
                  />
                  <label
                    for="consent-checkbox"
                    class="text-base text-gray-700 cursor-pointer leading-relaxed"
                  >
                    Tôi đồng ý cho
                    <span class="text-[#AB7E31] font-semibold"
                      >Nông Dân Phát</span
                    >
                    thu thập và sử dụng thông tin tôi cung cấp để liên hệ tư vấn
                    và cung cấp thông tin liên quan, theo <a href="/chinh-sach-bao-mat.html" class="text-[#AB7E31] hover:text-[#BE8F2B] underline">Chính sách bảo mật</a>.
                  </label>
                </div>
                <div class="flex justify-end">
                  <button
                    type="submit"
                    id="contact-submit-button"
                    class="bg-gradient-to-r from-[#AB7E31] to-[#BE8F2B] text-white py-3 px-6 rounded-3xl hover:shadow-xl transition-all duration-300 ease-in-out transform hover:scale-105 font-medium shadow-lg disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
                    disabled
                  >
                    Gửi ý kiến
                  </button>
                </div>
                <p class="text-xs text-gray-500 text-center mt-3">
                  Việc gửi thông tin không làm phát sinh bất kỳ nghĩa vụ hay giao dịch nào.
                </p>
              </form>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer placeholder - will be loaded dynamically -->
    <div id="footer-placeholder"></div>

    <!-- Load header and footer -->
    <script src="/load-header-footer.js"></script>

    <!-- Custom Checkbox Styles -->
    <style>
      .custom-checkbox {
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        background-color: white;
        border: 2px solid #d1d5db;
        border-radius: 4px;
        position: relative;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 20px;
        height: 20px;
        min-width: 20px;
        min-height: 20px;
        outline: none;
        box-shadow: none;
      }

      .custom-checkbox:checked {
        background-color: #ab7e31;
        border-color: #ab7e31;
      }

      .custom-checkbox:checked::after {
        content: "";
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
        width: 12px;
        height: 12px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20' fill='white'%3E%3Cpath fill-rule='evenodd' d='M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z' clip-rule='evenodd'/%3E%3C/svg%3E");
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
      }

      .custom-checkbox:hover {
        border-color: #ab7e31;
      }

      .custom-checkbox:focus {
        outline: none !important;
        box-shadow: none !important;
        border-color: #ab7e31;
      }

      .custom-checkbox:focus-visible {
        outline: none !important;
        box-shadow: none !important;
      }
    </style>

    <!-- JavaScript -->
    <script>
      // Cuộn đến phần "Xin ý kiến" khi có hash trong URL
      window.addEventListener("DOMContentLoaded", function () {
        if (window.location.hash === "#xin-y-kien") {
          setTimeout(() => {
            const element = document.getElementById("xin-y-kien");
            if (element) {
              element.scrollIntoView({ behavior: "smooth", block: "start" });
            }
          }, 100);
        }
      });
    </script>
    <script>
      // Xử lý input số điện thoại - chỉ nhận số
      const phoneInput = document.getElementById("phone");
      phoneInput.addEventListener("input", function (e) {
        let value = e.target.value.replace(/\D/g, "");
        if (value.length > 11) {
          value = value.substring(0, 11);
        }
        e.target.value = value;
      });

      // Form submission
      const contactForm = document.getElementById("contact-form");
      const contactSubmitButton = document.getElementById(
        "contact-submit-button"
      );
      const contactMessage = document.getElementById("contact-message");
      const consentCheckbox = document.getElementById("consent-checkbox");

      // Enable/disable submit button based on checkbox
      consentCheckbox.addEventListener("change", function () {
        contactSubmitButton.disabled = !this.checked;
      });

      function showContactMessage(text, type) {
        contactMessage.textContent = text;
        contactMessage.className = `mt-4 p-4 rounded-3xl ${
          type === "error"
            ? "bg-red-50 text-red-700"
            : "bg-green-50 text-green-700"
        }`;
        contactMessage.classList.remove("hidden");
        setTimeout(() => {
          contactMessage.classList.add("hidden");
        }, 5000);
      }

      contactForm.addEventListener("submit", async (e) => {
        e.preventDefault();

        if (CONTACT_SCRIPT_URL === "YOUR_CONTACT_FORM_SCRIPT_URL") {
          showContactMessage(
            "Vui lòng cấu hình CONTACT_SCRIPT_URL trong code.",
            "error"
          );
          return;
        }

        contactSubmitButton.disabled = true;
        contactSubmitButton.textContent = "Đang gửi...";

        // Lấy số điện thoại và format
        let phoneValue = document
          .getElementById("phone")
          .value.replace(/\D/g, "");
        phoneValue = phoneValue || "";

        const formData = {
          name: document.getElementById("name").value,
          email: document.getElementById("email").value,
          phone: phoneValue,
          message: document.getElementById("message").value,
          formType: "insights", // Phân biệt form từ trang Insights
        };

        try {
          // Sử dụng form submission với iframe ẩn để tránh CORS
          const iframe = document.createElement("iframe");
          iframe.name = "hidden-contact-iframe-" + Date.now();
          iframe.style.position = "fixed";
          iframe.style.left = "-9999px";
          iframe.style.top = "-9999px";
          iframe.style.width = "1px";
          iframe.style.height = "1px";
          iframe.style.border = "none";
          iframe.style.opacity = "0";
          iframe.style.pointerEvents = "none";

          document.body.appendChild(iframe);

          const hiddenForm = document.createElement("form");
          hiddenForm.method = "POST";
          hiddenForm.action = CONTACT_SCRIPT_URL;
          hiddenForm.target = iframe.name;
          hiddenForm.style.display = "none";

          // Thêm dữ liệu vào form
          Object.keys(formData).forEach((key) => {
            const input = document.createElement("input");
            input.type = "hidden";
            input.name = key;
            input.value = formData[key];
            hiddenForm.appendChild(input);
          });

          document.body.appendChild(hiddenForm);

          let isCompleted = false;

          const handleSuccess = () => {
            if (isCompleted) return;
            isCompleted = true;

            showContactMessage(
              "Ý kiến đã được gửi thành công! Chúng tôi sẽ phản hồi với bạn sớm nhất.",
              "success"
            );
            contactForm.reset();
            consentCheckbox.checked = false;
            contactSubmitButton.disabled = true;

            setTimeout(() => {
              if (hiddenForm.parentNode) {
                document.body.removeChild(hiddenForm);
              }
              if (iframe.parentNode) {
                document.body.removeChild(iframe);
              }
            }, 2000);

            contactSubmitButton.disabled = false;
            contactSubmitButton.textContent = "Gửi ý kiến";
          };

          const timeoutId = setTimeout(() => {
            handleSuccess();
          }, 2000);

          hiddenForm.submit();

          iframe.onload = function () {
            clearTimeout(timeoutId);
            handleSuccess();
          };
        } catch (error) {
          console.error("Form submission error:", error);
          showContactMessage(
            "Có lỗi xảy ra khi gửi ý kiến. Vui lòng thử lại sau.",
            "error"
          );
          contactSubmitButton.disabled = false;
          contactSubmitButton.textContent = "Gửi ý kiến";
        }
      });
    </script>
  </body>
</html>
